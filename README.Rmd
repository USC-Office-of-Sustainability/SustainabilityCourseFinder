---
title: "README"
output:
  md_document:
    variant: markdown_github
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


# USC SDGmap R Package

Peter Wu at Carnegie Mellon was the inspiration of this project, and his original R package can be found on [Github](https://github.com/pwu97/SDGmapR). 
At USC, Brian Tinsley and Julie Hopper in the Office of Sustainability have been working to develop this package further and raise sustainability awareness in higher education.

The goal of `SDGmapR` is to provide an open-source foundation for the systematic mapping
to the United Nations Sustainable Development Goals (SDGs). In this R package one can find publicly available [SDG keyword datasets](https://github.com/USC-Office-of-Sustainability/USC-SDGmap/tree/main/Keyword%20Lists) in the `tidy` data format, the [UN Official SDG color scheme](https://www.un.org/sustainabledevelopment/wp-content/uploads/2019/01/SDG_Guidelines_AUG_2019_Final.pdf) and several functions related to the mapping of text to particular sets of keywords.

## Installation

You can install the development version from [Github](https://github.com/USC-Office-of-Sustainability/USC-SDGmap) with:

```{r}
# install.packages("devtools")
# devtools::install_github("USC-Office-of-Sustainability/USC-SDGmap")
```

## Publicly Available SDG Keywords

The table below lists publicly available SDG keywords that have been published online. For this package, we used the CMU250 keyword list combined with some words from USC's Presidental Working Group (PWG) keyword list which mapped to the CMU1000 keyword list. Instructions for how to update or create your own keyword list will be described later in this readme... 
<!-- add a link here -->

```{r, echo=FALSE, example}

library(knitr)
sdg_table <- data.frame(
  "Source" = c("[USC-CMU keyword list](www.google.com)", 
               "[Core Elsevier (Work in Progress)](https://data.mendeley.com/datasets/87txkw7khs/1)", 
               "[Improved Elsevier Top 100](https://data.mendeley.com/datasets/9sxdykm8s4/2)", 
               "[SDSN](https://ap-unsdsn.org/regional-initiatives/universities-sdgs/)", 
               "[CMU Top 250 Words](https://www.cmu.edu/leadership/the-provost/provost-priorities/sustainability-initiative/sdg-definitions.html)",
               "[CMU Top 500 Words](https://www.cmu.edu/leadership/the-provost/provost-priorities/sustainability-initiative/sdg-definitions.html)",
               "[CMU Top 1000 Words](https://www.cmu.edu/leadership/the-provost/provost-priorities/sustainability-initiative/sdg-definitions.html)",
               "[University of Auckland (Work in Progress)](https://www.sdgmapping.auckland.ac.nz/)", "[University of Toronto (Work in Progress)](https://data.utoronto.ca/sustainable-development-goals-sdg-report/sdg-report-appendix/)"),
  "Dataset" = c("`cmu_usc_pwg_mapped`",
             "`elsevier_keywords`",
             "`elsevier100_keywords`",
             "`sdsn_keywords`",
             "`cmu250_keywords`",
             "`cmu500_keywords`",
             "`cmu1000_keywords`",
             "`auckland_keywords`",
             "`toronto_keywords`"),
  "CSV" = c("[Link](https://github.com/USC-Office-of-Sustainability/USC-SDGmap/blob/main/Keyword%20Lists/Elsevier100_keywords.csv)", "[Link](https://github.com/pwu97/SDGmapR/blob/main/datasets/elsevier_keywords_cleaned.csv)", "[Link](https://github.com/pwu97/SDGmapR/blob/main/datasets/elsevier100_keywords_cleaned.csv)", "[Link](https://github.com/pwu97/SDGmapR/blob/main/datasets/sdsn_keywords_cleaned.csv)", 
"[Link](https://github.com/pwu97/SDGmapR/blob/main/datasets/cmu250_keywords_cleaned.csv)",
"[Link](https://github.com/pwu97/SDGmapR/blob/main/datasets/cmu500_keywords_cleaned.csv)",
"[Link](https://github.com/pwu97/SDGmapR/blob/main/datasets/cmu1000_keywords_cleaned.csv)", "", ""),
  "SDG17" = c("Yes", "No", "No", "Yes", "No", "No", "No", "Yes", "Yes")
)
kable(sdg_table)

```


## Creating / Choosing the keyword list

A keyword list for the purposes of this R package must include the following columns:
'keyword', 'goal', 'weight', 'pattern', 'color'

Each keyword has a weight representing its relevance to that SDG, and a pattern which allows our function to read capitalization and italics in the same way. We are working on finding a way to include a pattern which considers the plural and singular versions of words as the same. Each SDG already has its own color assigned by the UN.

If you would like to use the USC-CMU, CMU250, or any other keyword lists located in the Datasets folder in this repository, then no extra work is required!
<!-- skip to different section -->

If you would like to create your own keyword list with unique weights, things become a bit more difficult. At CMU, they used Google's word2vec software to establish weights for each word and sdg.
We have not come around to finding a more effective method to assign weights to these words, but check back at a later date to see our progress on this matter.

We were motivated to use keywords from USC's PWG in combination with CMU250, so we expanded the CMU250 dataset to also include words in our list that mapped to other data sets.

In the R file named 'keyword_list_generator.R', you can find the code we used to generate our keyword list.

With this code, we added words from the PWG list (that did not have weights assigned) that were included in the CMU1000 lis using left-joins from the 'dplyr' library.

In addition, this R file has code to add a column to your initial unweighted keyword list which records the dataset each word was mapped to.

#### Exclude words

At the bottom of the same R file, there is a list called 'exclude_words'. These are the words which we don't want to be included in our mapping to college course descriptions. Many of these words like "students" and "academics" would be overly mapped due to their relevance to course descriptions. This file is where you would be able to update this list as you see fit. 


## Cleaning up course data

At USC, we received a file called 'USC_FULL_COURSE_LIST_20182_20183_20191' which can be found in the Datasets folder. THis csv file contains data for every single course offered for 3 different semester at USC. The first thing we did was clean up the data, get rid of repeats (and add a separate columns to keep track of how many sections were offered), and rename the columns.

In the R file named 'cleaning_course_data.R', you can see code for how to clean this course data. The three functions to do these are 'clean_data', 'get_semesters', and 'transform_data' which gets the course data into a nice format. The produced course data can be found in the Datasets folder with the name 'usc_courses'.


<!-- ### using joins, how to update, which columns you need, word2vec? -->
<!-- ### this is when you would include something about the exclude words before writing csv -->


<!-- # Mapping College Courses to SDGs -->
<!-- start with course data,  -->
<!-- ## how to clean up the data, explain the N.sections code -->
<!-- ## demonstrate how to use tabulate_sdg_keywords(), changing the keyword list param, -->
<!-- maybe try changing the origninal tabulate sdg keywords to take a parameter? or 
at least explain how to update that in functions.R-->








<!-- ## R Markdown -->

<!-- This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>. -->

<!-- When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this: -->

<!-- ```{r cars} -->
<!-- summary(cars) -->
<!-- ``` -->

<!-- ## Including Plots -->

<!-- You can also embed plots, for example: -->

<!-- ```{r pressure, echo=FALSE} -->
<!-- plot(pressure) -->
<!-- ``` -->

<!-- Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot. -->
